{% extends "base.html" %}

{% block title %}
    Home Page
{% endblock %}

{% block content %}
    <h1>Welcome to the Home Page</h1>

    {% if g.user %}
        <p>Hello, {{ g.user.nickname }}!</p>
        <a href="{{ url_for('user.reset_password') }}">Reset Password</a>
        <p><a href="{{ url_for('user.logout') }}">Logout</a></p>
    {% else %}
        <p>You are not logged in.</p>
        <p>To access your account, please log in or register.</p>

        <a href="{{ url_for('user.register') }}">Register</a>
        <a href="{{ url_for('index.index') }}?login=true">Login</a>
    {% endif %}

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const urlParams = new URLSearchParams(window.location.search);
            const dropdownParam = urlParams.get("login");
            if (dropdownParam === "true") {
                const dropdownElement = document.querySelector("#login");
                if (dropdownElement) {
                    const dropdown = new bootstrap.Dropdown(dropdownElement);
                    dropdown.show();
                }
            }
        });
    </script>

{% endblock %}
